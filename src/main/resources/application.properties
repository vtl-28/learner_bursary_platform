# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
spring.application.name=platform

# ============================================================================
# NEON POSTGRESQL CONFIGURATION
# ============================================================================
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver


# ============================================================================
# JPA/HIBERNATE CONFIGURATION
# ============================================================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# IMPORTANT: Use 'validate' to ensure schema matches database (don't let Hibernate modify tables)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# ============================================================================
# CONNECTION POOL (HIKARICP)
# ============================================================================
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=180000
spring.datasource.hikari.max-lifetime=180000
spring.datasource.hikari.keepalive-time=60000
spring.datasource.hikari.leak-detection-threshold=60000

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
server.port=${PORT:8080}
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain

# ============================================================================
# JWT CONFIGURATION
# CRITICAL: Change this secret in production! Must be at least 256 bits (32+ characters)
# ============================================================================
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}


# ============================================================================
# CACHE CONFIGURATION (CAFFEINE)
# ============================================================================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=10m

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
logging.level.root=INFO
logging.level.com.bursary.platform=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ============================================================================
# JACKSON JSON CONFIGURATION
# ============================================================================
spring.jackson.time-zone=Africa/Johannesburg

# ============================================================================
# VALIDATION CONFIGURATION
# ============================================================================
spring.validation.enabled=true

# ============================================================================
# CORS CONFIGURATION (Optional - handled in SecurityConfig)
# ============================================================================
# Uncomment if you want to configure CORS here instead of in code
# spring.web.cors.allowed-origins=http://localhost:4200
# spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# spring.web.cors.allowed-headers=*
# spring.web.cors.allow-credentials=true

# ============================================================================
# ERROR HANDLING
# ============================================================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html